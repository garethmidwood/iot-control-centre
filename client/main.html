<head>
  <title>Control Centre</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

  <script type="text/javascript" src="js/fitty.min.js"></script>
  <script type="text/javascript" src="js/nosleep.min.js"></script>

  <meta name="viewport" content="minimal-ui, width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

  <script>
    var noSleep = new NoSleep();

    document.addEventListener('click', function enableNoSleep() {
        document.removeEventListener('click', enableNoSleep, false);
        noSleep.enable();
    }, false);
  </script>



  <script>
    // some devices require the user to interact with the site in 
    // order to allow sounds to play
    // this function is hooked up so that it starts the audio when 
    // the user clicks the 'fullscreen' button
    function prepForSound() {
        // play a sound
        var x = document.getElementById("audio");
        x.play();
        x.volume = 0;
        x.currentTime = 0;
        x.pause();
    }

    function requestFullScreen() {

        var el = document.body;

        // Supports most browsers and their versions.
        var requestMethod = el.requestFullScreen || el.webkitRequestFullScreen 
        || el.mozRequestFullScreen || el.msRequestFullScreen;

        if (requestMethod) {
            // Native full screen.
            requestMethod.call(el);
        } else if (typeof window.ActiveXObject !== "undefined") {
            // Older IE.
            var wscript = new ActiveXObject("WScript.Shell");

            if (wscript !== null) {
                wscript.SendKeys("{F11}");
            }
        }

        return false;
    }
</script>



</head>

<body>
    {{#if isAdmin}}
        {{> admin_view}}
    {{else}}
        <a class="fullscreen" href="#" onclick="requestFullScreen(); prepForSound(); $(this).hide();">full screen</a>
        {{> location_tiles}}

        <audio id="audio" preload="auto" loop="true">
            <source src="audio/happy-birthday.mp3" type="audio/mpeg">
            Your browser does not support the audio element.
        </audio>
    {{/if}}
</body>



<template name="device">
    <li class="online"><strong>{{_id}}</strong></li>
</template>

<template name="beat_controls">
    <div class="beat_controls">
        {{#if sequenceIsPaused}}
            <button id="beat-control-play">Play</button>
        {{else}}
            <button id="beat-control-pause">Pause</button>
            <button id="beat-control-audio-restart">Restart Audio</button>
        {{/if}}

        <br/><br/>
        <button id="beat-control-reset">Reset</button>
        <button id="beat-control-disconnect">Disconnect All</button>
    </div>

    <div>
        {{dump_json}}
    </div>
</template>

<template name="sequence_controls">
    <h3>Sequence Selection</h3>
    <button id="sequence-control-single" class="{{#if selectedSequence 'single-regular'}}selected{{/if}}">Single</button>
    <button id="sequence-control-duo" class="{{#if selectedSequence 'duo'}}selected{{/if}}">Duo</button>
    <button id="sequence-control-tiered" class="{{#if selectedSequence 'tiered'}}selected{{/if}}">Tiered</button>
    <button id="sequence-control-fulltier" class="{{#if selectedSequence 'fulltier'}}selected{{/if}}">Full Tier</button>
    <button id="sequence-control-marquee" class="{{#if selectedSequence 'marquee'}}selected{{/if}}">Marquee</button>
    <button id="sequence-control-all" class="{{#if selectedSequence 'all'}}selected{{/if}}">All</button>

    <h3>Graphic Selection</h3>
    <button id="sequence-control-graphics-abstract1" class="{{#if selectedGraphic 'abstract1'}}selected{{/if}}">Blinds</button>
    <button id="sequence-control-graphics-abstract2" class="{{#if selectedGraphic 'abstract2'}}selected{{/if}}">Bubbles</button>
    <button id="sequence-control-graphics-abstract3" class="{{#if selectedGraphic 'abstract3'}}selected{{/if}}">RGB Swish</button>
    <button id="sequence-control-graphics-abstract4" class="{{#if selectedGraphic 'abstract4'}}selected{{/if}}">Fireworks</button>
    <br/><br/>
    <button id="sequence-control-graphics-abstract5" class="{{#if selectedGraphic 'abstract5'}}selected{{/if}}">Fill</button>
    <button id="sequence-control-graphics-abstract6" class="{{#if selectedGraphic 'abstract6'}}selected{{/if}}">Lettering</button>
    <button id="sequence-control-graphics-logo1" class="{{#if selectedGraphic 'logo1'}}selected{{/if}}">Lightshow Logo</button>
    <button id="sequence-control-graphics-logo2" class="{{#if selectedGraphic 'logo2'}}selected{{/if}}">Sliding Logo</button>
    <br/><br/>
    <button id="sequence-control-graphics-colour1" class="{{#if selectedGraphic 'colour1'}}selected{{/if}}">Blue</button>
    <button id="sequence-control-graphics-colour2" class="{{#if selectedGraphic 'colour2'}}selected{{/if}}">Orange</button>
    <button id="sequence-control-graphics-colour3" class="{{#if selectedGraphic 'colour3'}}selected{{/if}}">Pink</button>
    <button id="sequence-control-graphics-colour4" class="{{#if selectedGraphic 'colour4'}}selected{{/if}}">Red</button>
    <button id="sequence-control-graphics-colour5" class="{{#if selectedGraphic 'colour5'}}selected{{/if}}">White</button>
    <br/><br/>
</template>

<template name="location_tiles">
    {{#if positionSelected}}
        <div class="fullscreen {{#if positionIsActive}}active-position{{/if}}">
            {{#if sequenceIsPaused}}
                <h1 class="selected-position">{{positionSelected}}</h1>
            {{/if}}

            {{#if positionIsActive}}
                <div class="fullscreen {{selectedGraphic}}"></div>
            {{/if}}
        </div>
    {{else}}
        <ul id="location-tiles">
            {{#each locations}}
                {{> location}}
            {{/each}}
        </ul>
    {{/if}}
</template>

<template name="location">
    <li><a href="#" class="{{#if sessionId}}taken{{/if}} {{#if positionIsActive (_id)}}current{{/if}}" data-position="{{_id}}">{{_id}}</a></li>
</template>

















<template name="admin_view">
    <div id="admin-view">
        <div id="admin-locations">
            {{> location_tiles}} 
        </div>
        <div id="admin-controls">    
            <h1>Control Panel</h1>

            {{> beat_controls}}
            {{> sequence_controls}}
        </div>
    </div>   
</template>

