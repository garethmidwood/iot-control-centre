<head>
  <title>Control Centre</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

  <script type="text/javascript" src="js/fitty.min.js"></script>
  <script type="text/javascript" src="js/nosleep.min.js"></script>

  <meta name="viewport" content="minimal-ui, width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

  <script>
    var noSleep = new NoSleep();

    document.addEventListener('click', function enableNoSleep() {
        document.removeEventListener('click', enableNoSleep, false);
        noSleep.enable();
    }, false);
  </script>



  <script>
    // some devices require the user to interact with the site in 
    // order to allow sounds to play
    // this function starts the audio when the user clicks the
    // 'fullscreen' button
    function prepForSound() {
        // play a sound
        var x = document.getElementById("audio");
        x.play();
        x.volume = 0;
        x.currentTime = 0;
        x.pause();
    }

    function requestFullScreen() {

        var el = document.body;

        // Supports most browsers and their versions.
        var requestMethod = el.requestFullScreen || el.webkitRequestFullScreen 
        || el.mozRequestFullScreen || el.msRequestFullScreen;

        if (requestMethod) {
            // Native full screen.
            requestMethod.call(el);
        } else if (typeof window.ActiveXObject !== "undefined") {
            // Older IE.
            var wscript = new ActiveXObject("WScript.Shell");

            if (wscript !== null) {
                wscript.SendKeys("{F11}");
            }
        }

        return false;
    }
</script>



</head>

<body>
    {{#if isAdmin}}
        {{> admin_view}}
    {{else}}
        <a class="fullscreen" href="#" onclick="requestFullScreen(); prepForSound(); $(this).remove();">full screen</a>
        {{> location_tiles}}

        <audio id="audio" preload="auto" loop="true">
            <source src="audio/happy-birthday.mp3" type="audio/mpeg">
            Your browser does not support the audio element.
        </audio>
    {{/if}}
</body>



<template name="device">
    <li class="online"><strong>{{_id}}</strong></li>
</template>

<template name="beat_controls">
    <div class="beat_controls">
        {{#if sequenceIsPaused}}
            <button id="beat-control-play">PLAY</button>
        {{else}}
            <button id="beat-control-pause">PAUSE</button>
        {{/if}}

        <button id="beat-control-reset">RESET</button>

        <button id="beat-control-disconnect">DISCONNECT ALL</button>
    </div>

    <div>
        {{dump_json}}
    </div>
</template>

<template name="sequence_controls">
    <h3>Sequence Controls</h3>
    <button id="sequence-control-single">Single Ticker</button>
    <button id="sequence-control-duo">Duo Ticker</button>
    <button id="sequence-control-tiered">Tiered Ticker</button>
    <button id="select-sequence-all">All</button>

    <h3>Tiered Sequence Graphics</h3>
    <button id="sequence-control-graphics-abstract1">Blinds</button>
    <button id="sequence-control-graphics-abstract2">Bubbles</button>
    <button id="sequence-control-graphics-abstract3">RGB Swish</button>
    <br/>
    <button id="sequence-control-graphics-abstract4">Fireworks</button>
    <button id="sequence-control-graphics-abstract5">Fill</button>
    <button id="sequence-control-graphics-abstract6">Lettering</button>
    <br/>
    <button id="sequence-control-graphics-colour1">Blue</button>
    <button id="sequence-control-graphics-colour2">Orange</button>
    <button id="sequence-control-graphics-colour3">Pink</button>
    <br/>
    <button id="sequence-control-graphics-colour4">Red</button>
    <button id="sequence-control-graphics-colour5">White</button>
    <br/>
    <button id="sequence-control-graphics-logo1">Lightshow Logo</button>
    <button id="sequence-control-graphics-logo2">Sliding Logo</button>

</template>

<template name="location_tiles">
    {{#if positionSelected}}
        <div class="fullscreen {{#if positionIsActive}}active-position{{/if}}">
            {{#if sequenceIsPaused}}
                <h1 class="selected-position">{{positionSelected}}</h1>
            {{/if}}

            {{#if positionIsActive}}
                <div class="fullscreen {{selectedGraphic}}"></div>
            {{/if}}
        </div>
    {{else}}
        <ul id="location-tiles">
            {{#each locations}}
                {{> location}}
            {{/each}}
        </ul>
    {{/if}}
</template>

<template name="location">
    <li><a href="#" class="{{#if sessionId}}taken{{/if}} {{#if positionIsActive (_id)}}current{{/if}}" data-position="{{_id}}">{{_id}}</a></li>
</template>

















<template name="admin_view">
    <div id="admin-view">
        <div id="admin-locations">
            {{> location_tiles}} 
        </div>
        <div id="admin-controls">    
            <h1>ADMIN CONTROLS</h1>

            {{> beat_controls}}
            {{> sequence_controls}}
        </div>
    </div>   
</template>

